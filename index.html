<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vatech CT ROI シミュレーター</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body class="min-h-screen bg-gray-50 p-6">

<div class="max-w-7xl mx-auto space-y-6">

<div>
<h1 class="text-3xl font-bold tracking-tight">
Vatech CT ROI シミュレーター
</h1>
<p class="text-gray-500 mt-1">
各項目を自由に調整し、投資回収期間と利益構造を可視化
</p>
</div>

<!-- KPI -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div class="bg-white rounded-lg shadow-sm p-4 border-2 border-red-600">
<p class="text-sm text-gray-500">月間純利益</p>
<p id="net" class="text-2xl font-bold text-red-600">¥0</p>
</div>

<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200">
<p class="text-sm text-gray-500">投資回収期間</p>
<p id="payback" class="text-2xl font-bold">0 ヶ月</p>
</div>

<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200">
<p class="text-sm text-gray-500">ワランティ内純利益</p>
<p id="netProfit" class="text-2xl font-bold">¥0</p>
</div>
</div>

<div class="grid grid-cols-1 xl:grid-cols-3 gap-6">

<!-- 収入 -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5 space-y-3">
<h2 class="font-semibold text-lg">月間収入</h2>

<div class="grid grid-cols-3 gap-2 text-sm">
<input id="panoFee" type="text" inputmode="numeric" value="1500" class="border p-2 rounded">
<input id="panoPer" type="text" inputmode="numeric" value="3" class="border p-2 rounded">
<input id="panoDays" type="text" inputmode="numeric" value="22" class="border p-2 rounded">
</div>

<div class="grid grid-cols-3 gap-2 text-sm">
<input id="ctIFee" type="text" inputmode="numeric" value="3500" class="border p-2 rounded">
<input id="ctIPer" type="text" inputmode="numeric" value="2" class="border p-2 rounded">
<input id="ctIDays" type="text" inputmode="numeric" value="22" class="border p-2 rounded">
</div>

<div class="grid grid-cols-3 gap-2 text-sm">
<input id="ctSFee" type="text" inputmode="numeric" value="15000" class="border p-2 rounded">
<input id="ctSPer" type="text" inputmode="numeric" value="1" class="border p-2 rounded">
<input id="ctSDays" type="text" inputmode="numeric" value="22" class="border p-2 rounded">
</div>

<div class="grid grid-cols-3 gap-2 text-sm">
<input id="cephFee" type="text" inputmode="numeric" value="2000" class="border p-2 rounded">
<input id="cephPer" type="text" inputmode="numeric" value="1" class="border p-2 rounded">
<input id="cephDays" type="text" inputmode="numeric" value="22" class="border p-2 rounded">
</div>

<input id="incomeOther" type="text" inputmode="numeric" value="0"
class="border p-2 rounded w-full">

</div>

<!-- 費用 -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5 space-y-3">
<h2 class="font-semibold text-lg">月間費用</h2>

<input id="maintenance" type="text" inputmode="numeric" value="30000" class="border p-2 rounded w-full">
<input id="consumables" type="text" inputmode="numeric" value="20000" class="border p-2 rounded w-full">
<input id="electricity" type="text" inputmode="numeric" value="15000" class="border p-2 rounded w-full">

<input id="rent" type="text" inputmode="numeric" value="200000" class="border p-2 rounded w-full">
<input id="rentRatio" type="text" inputmode="numeric" value="30" class="border p-2 rounded w-full">

<input id="doctor" type="text" inputmode="numeric" value="800000" class="border p-2 rounded w-full">
<input id="doctorRatio" type="text" inputmode="numeric" value="10" class="border p-2 rounded w-full">

<input id="staff" type="text" inputmode="numeric" value="300000" class="border p-2 rounded w-full">
<input id="staffRatio" type="text" inputmode="numeric" value="20" class="border p-2 rounded w-full">

<input id="costOther" type="text" inputmode="numeric" value="0"
class="border p-2 rounded w-full">

</div>

<!-- 投資 + グラフ -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5 space-y-4">
<h2 class="font-semibold text-lg">投資</h2>

<input id="equipmentPrice" type="text" inputmode="numeric" value="7680000"
class="border p-2 rounded w-full">

<canvas id="chart" height="240"></canvas>
</div>

</div>
</div>

<script>

const WARRANTY=120;

function val(id){
return Number(document.getElementById(id).value.replace(/[^0-9]/g,""))||0;
}

function calc(){

const pano=val("panoFee")*val("panoPer")*val("panoDays");
const ctI=val("ctIFee")*val("ctIPer")*val("ctIDays");
const ctS=val("ctSFee")*val("ctSPer")*val("ctSDays");
const ceph=val("cephFee")*val("cephPer")*val("cephDays");
const income=pano+ctI+ctS+ceph+val("incomeOther");

const rent=val("rent")*(val("rentRatio")/100);
const doctor=val("doctor")*(val("doctorRatio")/100);
const staff=val("staff")*(val("staffRatio")/100);

const cost=
val("maintenance")+
val("consumables")+
val("electricity")+
rent+doctor+staff+
val("costOther");

const net=income-cost;
const payback=net>0?Math.ceil(val("equipmentPrice")/net):0;
const netProfit=net*(WARRANTY-payback);

document.getElementById("net").innerText="¥"+net.toLocaleString();
document.getElementById("payback").innerText=payback+" ヶ月";
document.getElementById("netProfit").innerText="¥"+netProfit.toLocaleString();

chart.data.datasets[0].data=[income,cost,net];
chart.update();
}

document.querySelectorAll("input").forEach(i=>{
i.addEventListener("input",calc);
});

const chart=new Chart(document.getElementById("chart"),{
type:"bar",
data:{
labels:["収入","費用","純利益"],
datasets:[{
data:[0,0,0],
backgroundColor:["#9ca3af","#9ca3af","#dc2626"]
}]
},
options:{
responsive:true,
plugins:{legend:{display:false}}
}
});

calc();

</script>

</body>
</html>






