<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vatech CT ROI シミュレーター</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f3f4f6;
  margin:0;
  padding:24px;
}
.container{
  max-width:1200px;
  margin:auto;
}
.card{
  background:white;
  border-radius:12px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 4px 12px rgba(0,0,0,0.06);
}
h1{margin:0 0 6px;}
.grid{
  display:grid;
  gap:16px;
}
.grid-3{
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
}
input{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid #d1d5db;
}
.kpi{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:16px;
}
.kpi strong{
  font-size:22px;
  color:#dc2626;
}
.small{font-size:12px;color:#6b7280;}
</style>
</head>

<body>
<div class="container">

<div class="card">
  <h1>Vatech CT ROI シミュレーター</h1>
  <div class="small">各項目を自由に調整し、投資回収期間と利益構造を可視化</div>
</div>

<div class="kpi">
  <div class="card">月間純利益<br><strong id="net">-</strong></div>
  <div class="card">投資回収期間<br><strong id="payback">-</strong></div>
  <div class="card">ワランティ内純利益<br><strong id="netProfit">-</strong></div>
</div>

<div class="card">
<h3>CT装置価格</h3>
<input id="equipmentPrice" inputmode="numeric" value="7680000">
</div>

<div class="card">
<h3>月間収入</h3>
<div class="grid grid-3">
<div>
<label>PANO</label>
<input id="panoFee" inputmode="numeric" value="1500">
<input id="panoPerDay" inputmode="numeric" value="3">
<input id="panoDays" inputmode="numeric" value="22">
</div>

<div>
<label>CT（保険）</label>
<input id="ctIFee" inputmode="numeric" value="3500">
<input id="ctIPerDay" inputmode="numeric" value="2">
<input id="ctIDays" inputmode="numeric" value="22">
</div>

<div>
<label>CT（自費）</label>
<input id="ctSFee" inputmode="numeric" value="15000">
<input id="ctSPerDay" inputmode="numeric" value="1">
<input id="ctSDays" inputmode="numeric" value="22">
</div>

<div>
<label>CEPH</label>
<input id="cephFee" inputmode="numeric" value="2000">
<input id="cephPerDay" inputmode="numeric" value="1">
<input id="cephDays" inputmode="numeric" value="22">
</div>
</div>
</div>

<div class="card">
<h3>月間費用</h3>
<div class="grid grid-3">
<div>
<label>メンテナンス</label>
<input id="maintenance" inputmode="numeric" value="30000">
</div>

<div>
<label>消耗品</label>
<div class="small">（バイトビニル、手袋、アルコール）</div>
<input id="consumables" inputmode="numeric" value="20000">
</div>

<div>
<label>電気代</label>
<input id="electricity" inputmode="numeric" value="15000">
</div>
</div>
</div>

<div class="card">
<canvas id="chart"></canvas>
</div>

</div>

<script>
const WARRANTY = 120;

const inputs = document.querySelectorAll("input");

function val(id){
  return Number(document.getElementById(id).value) || 0;
}

function calc(){
  const income =
    val("panoFee")*val("panoPerDay")*val("panoDays")+
    val("ctIFee")*val("ctIPerDay")*val("ctIDays")+
    val("ctSFee")*val("ctSPerDay")*val("ctSDays")+
    val("cephFee")*val("cephPerDay")*val("cephDays");

  const cost =
    val("maintenance")+
    val("consumables")+
    val("electricity");

  const net = income - cost;
  const payback = net>0?Math.ceil(val("equipmentPrice")/net):0;
  const netProfit = net*(WARRANTY-payback);

  document.getElementById("net").innerText="¥"+net.toLocaleString();
  document.getElementById("payback").innerText=payback+" ヶ月";
  document.getElementById("netProfit").innerText="¥"+netProfit.toLocaleString();

  chart.data.datasets[0].data=[income,cost,net];
  chart.update();
}

inputs.forEach(i=>{
  i.addEventListener("input",calc);
});

const chart=new Chart(document.getElementById("chart"),{
  type:"bar",
  data:{
    labels:["収入","費用","純利益"],
    datasets:[{
      data:[0,0,0],
      backgroundColor:["#9ca3af","#9ca3af","#dc2626"]
    }]
  },
  options:{
    responsive:true,
    plugins:{
      legend:{display:false}
    }
  }
});

calc();
</script>

</body>
</html>


